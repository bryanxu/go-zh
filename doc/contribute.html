<!--{
	"Title": "贡献指南"
}-->

<!--{
	"Title": "Contribution Guidelines"
}-->

<div class="english">
<h2 id="Introduction">Introduction</h2>
</div>

<h2 id="前言">前言</h2>

<div class="english">
<p>
This document explains how to contribute changes to the Go project.
It assumes you have installed Go using the
<a href="/doc/install/source">installation instructions</a> and
have <a href="code.html">written and tested your code</a>.
(Note that the <code>gccgo</code> frontend lives elsewhere;
see <a href="gccgo_contribute.html">Contributing to gccgo</a>.)
</p>
</div>

<p>
本文档就如何向Go项目贡献更改进行说明。假定你已经按照<a href="/doc/install/source">安装说明</a>安装了Go，
且已经<a href="code.html">编写并测试了你的代码</a>。（关于 <code>gccgo</code>
前端的文档见 <a href="gccgo_contribute.html">为gccgo做贡献</a>.）
</p>

<div class="english">
<h2 id="Design">Discuss your design</h2>
</div>

<h2 id="设计">讨论你的设计</h2>

<div class="english">
<p>
The project welcomes submissions but please let everyone know what
you're working on if you want it to become part of the main repository.
</p>
</div>

<p>
本项目欢迎提交意见，但若想让它成为主代码仓库的一部分，请让所有人都知道你所做的事。
</p>

<div class="english">
<p>
Before undertaking to write something new for the Go project, send
mail to the <a href="http://groups.google.com/group/golang-nuts">mailing
list</a> to discuss what you plan to do.  This gives everyone a
chance to validate the design, helps prevent duplication of effort,
and ensures that the idea fits inside the goals for the language
and tools.  It also guarantees that the design is sound before code
is written; the code review tool is not the place for high-level
discussions.
</p>
</div>

<p>
在许诺为Go项目编写新东西时，请向此
<a href="http://groups.google.com/group/golang-nuts">邮件列表</a>
发送邮件来讨论你的计划。这将给所有人确认该设计的机会，以帮助避免重复的努力，
并对此想法是否符合该语言或工具的目标进行确认。这亦可保证在编写代码前，该设计考虑的充分性；
代码审核工具并不在高级讨论范围之内。
</p>

<div class="english">
<p>
In short, send mail before you code.
And don't start the discussion by mailing a change list!
</p>
</div>

<p>
简言之，编码前请发邮件，不要通过发送更改列表来开始讨论！
</p>

<div class="english">
<h2 id="Testing">Testing redux</h2>
</div>

<h2 id="测试">最终测试</h2>

<div class="english">
<p>
You've <a href="code.html">written and tested your code</a>, but
before sending code out for review, run all the tests for the whole
tree to make sure the changes don't break other packages or programs:
</p>
</div>

<p>
你必须<a href="code.html">编写并测试你的代码</a>，但在发送代码进行审核前，
请对整个代码树运行所有的测试，以确保此更改不会破坏其它包或程序：
</p>

<div class="english">
<pre>
cd $GOROOT/src
./all.bash    # On Windows, run all.bat
</pre>
</div>

<pre>
cd $GOROOT/src
./all.bash    # 在Windows下，请运行all.bat
</pre>

<div class="english">
<p>
After running for a while, the command should print "<code>ALL TESTS PASSED</code>".
</p>
</div>

<p>
运行一会儿之后，命令行应当打印出“<code>ALL TESTS PASSED</code>”。
</p>

<div class="english">
<h2 id="Code_review">Code review</h2>
</div>

<h2 id="代码审核">代码审核</h2>

<div class="english">
<p>
Changes to Go must be reviewed before they are submitted,
no matter who makes the change.
(In exceptional cases, such as fixing a build, the review can
follow shortly after submitting.)
A Mercurial extension helps manage the code review process.
The extension is included in the Go source tree but needs
to be added to your Mercurial configuration.
</p>
</div>

<p>
无论谁对Go进行更改，在它被提交前都必须进行审核。（在特殊情况下，比如修复一个构建，
可在提交后进行审核。）Mercurial扩展可帮助管理代码审核流程。该扩展包含在Go源码树中，
但需要添加到你的Mercurial配置中。
</p>

<div class="english">
<h3>Caveat for Mercurial aficionados</h3>
</div>

<h3>敬告Mercurial死忠</h3>

<div class="english">
<p>
<i>Using Mercurial with the code review extension is not the same
as using standard Mercurial.</i>
</p>
</div>

<p>
<i>通过代码审核扩展使用Mercurial不同于使用标准的Mercurial。</i>
</p>

<div class="english">
<p>
The Go repository is maintained as a single line of reviewed changes;
we prefer to avoid the complexity of Mercurial's arbitrary change graph.
The code review extension helps here: its <code>hg submit</code> command
automatically checks for and warns about the local repository
being out of date compared to the remote one.
The <code>hg submit</code> command also verifies other
properties about the Go repository.
For example,
it checks that Go code being checked in is formatted in the standard style,
as defined by <a href="/cmd/gofmt">gofmt</a>,
and it checks that the author of the code is properly recorded for
<a href="#copyright">copyright purposes</a>.
</p>
</div>

<p>
Go代码库作为独立的审核更改线来维护，我们想避免Mercurial随意更改图表的复杂性。
代码审核扩展对你的帮助：它的 <code>hg submit</code> 命令会自动检查并提醒本地仓库与远程的比较是否过时。
<code>hg submit</code> 也可核对Go仓库的其它属性。例如，它默认通过<a href="/cmd/gofmt">gofmt</a>
来检查签入的Go代码是否已按照标准风格格式化，并检查代码的作者是否为<a href="#版权">版权目的</a>正确地记录。
</p>

<div class="english">
<p>
To help ensure changes are only created by <code>hg submit</code>,
the code review extension disables the standard <code>hg commit</code>
command.
</p>
</div>

<p>
为帮助确保更改只通过 <code>hg submit</code> 创建，代码审核扩展关闭了标准的 <code>hg commit</code> 命令。
</p>

<div class="english">
<h3>Configure the extension</h3>
</div>

<h3>配置扩展</h3>

<div class="english">
<p>Edit <code>$GOROOT/.hg/hgrc</code> to add:</p>
</div>

<p>编辑 <code>$GOROOT/.hg/hgrc</code> 并添加：</p>

<div class="english">
<pre>
[extensions]
codereview = $GO_ROOT/lib/codereview/codereview.py

[ui]
username = Your Name &lt;you@server.dom&gt;
</pre>
</div>

<pre>
[extensions]
codereview = $GOROOT/lib/codereview/codereview.py

[ui]
username = 你的名字 &lt;你的@邮件.地址&gt;
</pre>

<div class="english">
<p>
The <code>username</code> information will not be used unless
you are a committer (see below), but Mercurial complains if it is missing.
</p>
</div>

<p>
除非你是提交者（见下），否者 <code>username</code> 信息将不会被使用，但如果没有的话，Mercurial会发牢骚。
</p>

<div class="english">
<h3>Log in to the code review site.</h3>
</div>

<h3>登录到代码审核站点</h3>

<div class="english">
<p>
The code review server uses a Google Account to authenticate.
(If you can use the account to
<a href="https://www.google.com/accounts/Login?hl=en&amp;continue=http://www.google.com/">sign in at google.com</a>,
you can use it to sign in to the code review server.
The email address you use on the Code Review site
will be recorded in the <a href="http://code.google.com/p/go/source/list">Mercurial change log</a>
and in the <a href="/CONTRIBUTORS"><code>CONTRIBUTORS</code></a> file.
You can <a href="https://www.google.com/accounts/NewAccount">create a Google Account</a>
associated with any address where you receive email.
If you've enabled the two-step verification feature, don't forget to generate an
application-specific password and use that when prompted for a password.
</p>
</div>

<p>
代码审核服务使用Google账户认证。（若你可以使用某个账户
<a href="https://www.google.com/accounts/Login?hl=en&amp;continue=http://www.google.com/">登录到google.com</a>，
你就可以使用它登录到代码审核服务。）你在代码审核站点上使用的电子邮件地址将被记录在
<a href="http://code.google.com/p/go/source/list">Mercurial更改日志</a> 和
<a href="/CONTRIBUTORS"><code>CONTRIBUTORS</code></a> 文件中。
你可以<a href="https://www.google.com/accounts/NewAccount">创建一个Google账户</a>来关联到任何你接收邮件的地址。
如果你开启了两步验证特性，请不要忘记生成一个特定于应用的密码并在提示输入密码时输入它。
</p>

<pre>
$ cd $GOROOT
$ hg code-login
Email (login for uploading to codereview.appspot.com): rsc@golang.org
Password for rsc@golang.org:

Saving authentication cookies to /Users/rsc/.codereview_upload_cookies_codereview.appspot.com
</pre>

<div class="english">
<h3>Configure your account settings.</h3>
</div>

<h3>配置你的帐户设置</h3>

<div class="english">
<p>Edit your <a href="http://codereview.appspot.com/settings">code review settings</a>.
Grab a nickname.
Many people prefer to set the Context option to
&ldquo;Whole file&rdquo; to see more context when reviewing changes.
</p>
</div>

<p>
编辑你的<a href="http://codereview.appspot.com/settings">代码审核设置</a>。设置一个昵称。
一些人更喜欢将Context选项设置为&ldquo;Whole file&rdquo;以便在审核更改时看到更多上下文。
</p>

<div class="english">
<p>Once you have chosen a nickname in the settings page, others
can use that nickname as a shorthand for naming reviewers and the CC list.
For example, <code>rsc</code> is an alias for <code>rsc@golang.org</code>.
</p>
</div>

<p>
一旦你在设置页面中选择了一个昵称，其他人就可以使用该昵称作为简写来命名审核者和CC列表。
比如，<code>rsc</code> 就是 <code>rsc@golang.org</code> 的别名。
</p>

<div class="english">
<h3>Switch to the default branch</h3>
</div>

<h3>切换到default分支</h3>

<div class="english">
<p>
Most Go installations use a release branch, but new changes should
only be made to the default branch. (They may be applied later to a release
branch as part of the release process.)
Before making a change, make sure you use the default branch:
</p>
</div>

<p>
大多数Go安装使用release分支，但是任何新的改动都只能对default分支进行。
（它们会在发布下一步发布版时候被合并到release分支。）
在做任何更改之前，请确保已经切换到了default分支：
</p>

<pre>
$ hg update default
</pre>

<div class="english">
<h3>Make a change</h3>
</div>

<h3>进行更改</h3>

<div class="english">
<p>
The entire checked-out tree is writable.
If you need to edit files, just edit them: Mercurial will figure out which ones changed.
You do need to inform Mercurial of added, removed, copied, or renamed files,
by running
<code>hg add</code>,
<code>hg rm</code>,
<code>hg cp</code>,
or
<code>hg mv</code>.
</p>
</div>

<p>
整个检出的树都是可写的。若你需要编辑文件，就直接编辑它，Mercurial会找出哪个被更改了。
若你需要告诉Mercurial哪个文件被添加、移除、复制或重命名了，只需运行
<code>hg add</code>、<code>hg rm</code>、<code>hg cp</code> 或 <code>hg mv</code>。
</p>

<div class="english">
<p>When you are ready to send a change out for review, run</p>
</div>

<p>当你准备好为审核发出一个更改了，就可以在你的Go仓库中的任何目录下运行</p>

<pre>
$ hg change
</pre>

<div class="english">
<p>from any directory in your Go repository.
Mercurial will open a change description file in your editor.
(It uses the editor named by the <code>$EDITOR</code> environment variable, <code>vi</code> by default.)
The file will look like:
</p>
</div>

<p>
Mercurial就会在你的编辑器中打开一个更改描述文件。
（它使用由 <code>$EDITOR</code> 环境变量命名的编辑器，默认为<code>vi</code>。）
此文件看起来会像这样：
</p>

<pre>
# Change list.
# Lines beginning with # are ignored.
# Multi-line values should be indented.

Reviewer:
CC:

Description:
	&lt;enter description here&gt;

Files:
	src/pkg/math/sin.go
	src/pkg/math/tan.go
	src/pkg/regexp/regexp.go
</pre>

<div class="english">
<p>
The <code>Reviewer</code> line lists the reviewers assigned
to this change, and the <code>CC</code> line lists people to
notify about the change.
These can be code review nicknames or arbitrary email addresses.
Unless explicitly told otherwise, such as in the discussion leading
up to sending in the change list, leave the reviewer field blank.
This means that the
<a href="http://groups.google.com/group/golang-dev">golang-dev@googlegroups.com</a>
mailing list will be used as the reviewer.
</p>
</div>

<p>
<code>Reviewer</code> 一行列出指定此更改的审核者，<code>CC</code> 一行则列出该变更通知的人。
这些可以使代码审核昵称或任意邮件地址。除非明确告知，例如在发送到更改列表前的讨论中，否则，
请将审核者字段留空。这意味着<a href="http://groups.google.com/group/golang-dev">golang-dev@googlegroups.com</a>
邮件列表将被用作审核者。
</p>

<div class="english">
<p>
Replace &ldquo;<code>&lt;enter description here&gt;</code>&rdquo;
with a description of your change.
The first line of the change description is conventionally a one-line
summary of the change, prefixed by the primary affected package,
and is used as the subject for code review mail; the rest of the
description elaborates.
</p>
</div>

<p>
请将 &ldquo;<code>&lt;enter description here&gt;</code>&rdquo;替换为你的更改描述。
按照惯例，更改描述的第一行应为该更改的概述，前缀主要影响的包，它将作为代码审核邮件的主题；
其余为详细的描述。
</p>

<div class="english">
<p>
The <code>Files</code> section lists all the modified files
in your client.
It is best to keep unrelated changes in different change lists.
In this example, we can include just the changes to package <code>math</code>
by deleting the line mentioning <code>regexp.go</code>.
</p>
</div>

<p>
<code>Files</code> 一节列出了所有在客户端更改过的文件。最好将无关更改放在不同的更改列表中。
在本例子中，我们可以只通过删除提及 <code>regexp.go</code> 的行来列入对包 <code>math</code> 的更改。
</p>

<div class="english">
<p>
After editing, the template might now read:
</p>
</div>

<p>
在编辑之后，现在的模版应为：
</p>

<pre>
# Change list.
# Lines beginning with # are ignored.
# Multi-line values should be indented.

Reviewer: golang-dev@googlegroups.com
CC: math-nuts@swtch.com

Description:
	math: improved Sin, Cos and Tan precision for very large arguments.

	See Bimmler and Shaney, ``Extreme sinusoids,'' J. Math 3(14).
	Fixes issue 159.

Files:
	src/pkg/math/sin.go
	src/pkg/math/tan.go
</pre>

<div class="english">
<p>
The special sentence &ldquo;Fixes issue 159.&rdquo; associates
the change with issue 159 in the <a href="http://code.google.com/p/go/issues/list">Go issue tracker</a>.
When this change is eventually submitted, the issue
tracker will automatically mark the issue as fixed.
</p>
</div>

<p>
特殊的句子&ldquo;Fixes issue 159.&rdquo;将此更改与<a href="http://code.google.com/p/go/issues/list">Go问题跟踪系统</a>
中的第195号问题相关联。在此更改被最终提交后，问题跟踪系统将自动把该问题标记为已修复。
</p>

<div class="english">
<p>
Save the file and exit the editor.</p>
</div>

<p>
最后保存并退出该编辑器。
</p>

<div class="english">
<p>
The code review server assigns your change an issue number and URL,
which <code>hg change</code> will print, something like:
</p>
</div>

<p>
代码审核服务会为你的更改分配一个问题编号与URL，<code>hg change</code>
会将它打印出来，就像这样：
</p>

<pre>
CL created: http://codereview.appspot.com/99999
</pre>

<div class="english">
<p>
If you need to re-edit the change description, or change the files included in the CL,
run <code>hg change 99999</code>. Alternatively, you can use <code>hg file 99999 somefile</code>
to add <code>somefile</code> to CL 99999, and use <code>hg file -d 99999 somefile</code> to remove
<code>somefile</code> from the CL.
</p>
</div>

<p>
若你需要重新编辑更改描述，或更改包含在该CL中的文件，请运行 <code>hg change</code> 99999</p>。
作为选择，你也可以使用 <code>hg file 99999 somefile</code> 将 <code>somefile</code> 添加到CL
99999中，并使用 <code>hg file -d 99999 somefile</code> 将 <code>somefile</code>
从该CL中移除。
</p>

<div class="english">
<p>
You can see a list of your pending changes by running <code>hg pending</code> (<code>hg p</code> for short).
</p>
</div>

<p>
你可以通过运行 <code>hg pending</code> 来列出你待定的更改（简写为 <code>hg p</code>）。
</p>


<div class="english">
<h3>Synchronize your client</h3>
</div>

<h3>同步你的客户端</h3>

<div class="english">
<p>While you were working, others might have submitted changes
to the repository.  To update your client, run</p>
</div>

<p>
在你工作时，其他人可能将更改提交至仓库。要更新你的客户端，运行
</p>

<pre>
$ hg sync
</pre>

<div class="english">
<p>(For Mercurial fans, <code>hg sync</code> runs <code>hg pull -u</code>
but then also synchronizes the local change list state against the new data.)</p>
</div>

<p>
（对于Mercurial粉来说，<code>hg sync</code> 不仅会运行
<code>hg pull -u</code>，还会针对新的数据同步本地更改列表状态。）
</p>

<div class="english">
<p>
If files you were editing have changed, Mercurial does its best to merge the
remote changes into your local changes.  It may leave some files to merge by hand.
</p>
</div>

<p>
若你编辑过的文件已被更改，Mercurial会尽可能将远程更改改合并到你的本地更改中。
</p>

<div class="english">
<p>
For example, suppose you have edited <code>flag_test.go</code> but
someone else has committed an independent change.
When you run <code>hg sync</code>, you will get the (scary-looking) output
(emphasis added):
</p>
</div>

<p>
例如，假设你已经编辑过 <code>flag_test.go</code> 但某人也已经提交了一个独立的更改。
当你运行 <code>hg sync</code> 时，你将看到（吓人的）输出（重点强调）：
</p>

<pre>
$ hg sync
adding changesets
adding manifests
adding file changes
added 1 changeset with 2 changes to 2 files
getting src/pkg/flag/flag.go
couldn't find merge tool hgmerge
merging src/pkg/flag/flag_test.go
warning: conflicts during merge.
<i>merging src/pkg/flag/flag_test.go failed!</i>
1 file updated, 0 files merged, 0 files removed, 1 file unresolved
use 'hg resolve' to retry unresolved file merges
$
</pre>

<div class="english">
<p>
The only important part in that transcript is the italicized line:
Mercurial failed to merge your changes with the independent change.
When this happens, Mercurial leaves both edits in the file,
marked by <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> and
<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>.
it is now your job to edit the file to combine them.
Continuing the example, searching for those strings in <code>flag_test.go</code>
might turn up:
</p>
</div>

<p>
该抄本最重要的部分为斜体行：Mercurial将你的更改与独立的更改合并时可能会失败。
当发生该情况时，Mercurial会在文件中保留二者的编辑，并以
<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> 与 <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>
标记。现在你要做的就是编辑该文件以将它们结合起来。
继续该例子，在 <code>flag_test.go</code> 中搜索那些字符串时会出现：
</p>

<pre>
	VisitAll(visitor);
&lt;&lt;&lt;&lt;&lt;&lt;&lt; local
	if len(m) != 7 {
=======
	if len(m) != 8 {
&gt;&gt;&gt;&gt;&gt;&gt;&gt; other
		t.Error("VisitAll misses some flags");
</pre>

<div class="english">
<p>
Mercurial doesn't show it, but suppose the original text that both edits
started with was 6; you added 1 and the other change added 2,
so the correct answer might now be 9.  First, edit the section
to remove the markers and leave the correct code:
</p>
</div>

<p>
Mercurial不会显示它，但假如你们同时编辑的原文本均为6，你加了1而其他人加了2，
那么正确的答案也许为9。首先，编辑该小节以移除标记并留下正确的代码：
</p>

<pre>
	VisitAll(visitor);
	if len(m) != 9 {
		t.Error("VisitAll misses some flags");
</pre>

<div class="english">
<p>
Then ask Mercurial to mark the conflict as resolved:
</p>
</div>

<p>
然后请求Mercurial将此冲突标记为已解决：
</p>

<pre>
$ hg resolve -m flag_test.go
</pre>

<div class="english">
<p>
If you had been editing the file, say for debugging, but do not
care to preserve your changes, you can run
<code>hg revert flag_test.go</code> to abandon your
changes, but you may still need to run
<code>hg resolve -m</code> to mark the conflict resolved.
</p>
</div>

<p>
若你为请求调试必须编辑该文件，但并不关心上一次更改，你可以运行
<code>hg revert flag_test.go</code> 来放弃你的更改，但你仍需要运行
<code>hg resolve -m</code> 来将冲突标记为已解决。
</p>

<div class="english">
<h3>Mail the change for review</h3>
</div>

<h3>为审核邮寄更改</h3>

<div class="english">
<p>To send out a change for review, run <code>hg mail</code> using the change list number
assigned during <code>hg change</code>:</p>
</div>

<p>
要为审核发出更改，需运行 <code>hg mail</code> 使用更改列表编号在 <code>hg change</code> 时分配：
</p>

<pre>
$ hg mail 99999
</pre>

<div class="english">
<p>You can add to the <code>Reviewer:</code> and <code>CC:</code> lines
using the <code>-r</code> or <code>--cc</code> options.
In the above example, we could have left the <code>Reviewer</code> and <code>CC</code>
lines blank and then run:
</p>
</div>

<p>
你可以通过使用 <code>-r</code> 或 <code>--cc</code> 选项来添加 <code>Reviewer:</code>
与 <code>CC:</code> 行。在下面的例子中，我们应将 <code>Reviewer</code> 与 <code>CC</code>
行保持空白，接着运行
</p>

<pre>
$ hg mail -r golang-dev@googlegroups.com --cc math-nuts@swtch.com 99999
</pre>

<div class="english">
<p>to achieve the same effect.</p>
</div>

<p>来达到相同的效果</p>

<div class="english">
<p>Note that <code>-r</code> and <code>--cc</code> cannot be spelled <code>--r</code> or <code>-cc</code>.</p>
</div>

<p>
请注意 <code>-r</code> 与 <code>--cc</code> 不可拼写为 <code>--r</code> 或 <code>-cc</code>。
</p>


<div class="english">
<h3>Reviewing code</h3>
</div>

<h3>审核代码</h3>

<div class="english">
<p>
Running <code>hg mail</code> will send an email to you and the reviewers
asking them to visit the issue's URL and make comments on the change.
When done, the reviewer clicks &ldquo;Publish and Mail comments&rdquo;
to send comments back.
</p>
</div>

<p>
运行 <code>hg mail</code> 会将一封邮件发送至审核者以请求他们访问问题URL，并对该更改进行评论。
在结束后，审核者会单击&ldquo;Publish and Mail comments&rdquo;返回评论。
</p>


<div class="english">
<h3>Revise and upload</h3>
</div>

<h3>修订并上传</h3>

<div class="english">
<p>You will probably revise your code in response to the reviewer comments.
When you have revised the code and are ready for another round of review, run
</p>
</div>

<p>
你或许会根据审核者评论的反馈来修订你的代码。当修订过你的代码并准备好下一轮审核时，运行
</p>

<pre>
$ hg mail 99999
</pre>

<div class="english">
<p>again to upload the latest copy and send mail asking the reviewers to please take another look
(<code>PTAL</code>).
You might also visit the code review web page and reply to the comments,
letting the reviewer know that you've addressed them or explain why you
haven't.  When you're done replying, click &ldquo;Publish and Mail comments&rdquo;
to send the line-by-line replies and any other comments.
</p>
</div>

<p>
再次上传最新的副本并发送邮件请求审核者再次查看（<code>PTAL</code>，即please take another look）。
你也可浏览代码审核的Web页面并回复评论，让审核者知道你的处理方式，或解释为什么不作处理。
当你回复完成后，请点击&ldquo;Publish and Mail comments&rdquo;来发送行与行对比的回复或其他评论。
</p>

<div class="english">
<p>
The reviewer can comment on the new copy, and the process repeats.
The reviewer approves the change by replying with a mail that says
<code>LGTM</code>: looks good to me.
</p>
</div>

<p>
审核者可对新的副本进行评论，此过程会继续重复。当审核者赞同此更改时，会回复一封邮件说：
<code>LGTM</code>：在我看来不错（looks good to me）。
</p>

<div class="english">
<h3>Submit the change after the review</h3>
</div>

<h3>审核后提交更改</h3>

<div class="english">
<p>
After the code has been <code>LGTM</code>'ed, it is time to submit
it to the Mercurial repository.
If you are a committer, you can run:
</p>
</div>

<p>
After the code has been <code>LGTM</code>'ed, it is time to submit
it to the Mercurial repository.
If you are a committer, you can run:
在代码 <code>LGTM</code> 之后，就是将它提交到Mercurial仓库的时候了。
若你是提交者，可运行：
</p>

<pre>
$ hg submit 99999
</pre>

<div class="english">
<p>
This checks the change into the repository.
The change description will include a link to the code review,
and the code review will be updated with a link to the change
in the repository.
</p>
</div>

<p>
这会将此更改签入仓库中。更改描述会包含代码审核的链接，
而代码审核则会更新一个此更改在仓库中的链接。
</p>

<div class="english">
<p>
If your local copy of the repository is out of date,
<code>hg submit</code>
will refuse the change:
</p>
</div>

<p>
若你的仓库的本地已副本过期，<code>hg submit</code> 会拒绝此更改：
</p>

<pre>
$ hg submit 99999
local repository out of date; must sync before submit
</pre>

<div class="english">
<p>
If you are not a committer, you cannot submit the change directly.
Instead, a committer, usually the reviewer who said <code>LGTM</code>,
will run:
</p>
</div>

<p>
若你不是提交者，你将无法直接提交此更改。某个提交者，通常为说 <code>LGTM</code> 的审核者会运行：
</p>

<pre>
$ hg clpatch 99999
$ hg submit 99999
</pre>

<div class="english">
<p>The <code>clpatch</code> command imports your change 99999 into
the committer's local Mercurial client, at which point the committer
can check or test the code more.
(Anyone can run <code>clpatch</code> to try a change that
has been uploaded to the code review server.)
The <code>submit</code> command submits the code.  You will be listed as the
author, but the change message will also indicate who the committer was.
Your local client will notice that the change has been submitted
when you next run <code>hg sync</code>.
</p>
</div>

<p>
<code>clpatch</code> 命令会将你的更改99999导入提交者的本地Mercurial客户端，
此时该提交者可更深入地检查并测试此代码。（任何人都可运行 <code>clpatch</code>
以尝试已上传至代码审核服务的更改。）<code>submit</code> 命令提交该代码。
你将会作为作者列出，但该更改信息也将指明谁是提交者。当你下一次运行 <code>hg sync</code>
时你的本地客户端将提示该更改已被提交。
</p>


<div class="english">
<h3 id="copyright">Copyright</h3>
</div>

<h3 id="版权">版权</h3>

<div class="english">
<p>Files in the Go repository don't list author names,
both to avoid clutter and to avoid having to keep the lists up to date.
Instead, your name will appear in the <a href="http://code.google.com/p/go/source/list">Mercurial change log</a>
and in the <a href="/CONTRIBUTORS"><code>CONTRIBUTORS</code></a> file
and perhaps the <a href="/AUTHORS"><code>AUTHORS</code></a> file.
</p>
</div>

<p>
Go仓库中的文件不会列出作者的名字，以此避免混乱及必须保持该列表更新的麻烦。
取而代之，你的名字将出现在 <a href="http://code.google.com/p/go/source/list">Mercurial更改日志</a>
与 <a href="/CONTRIBUTORS"><code>CONTRIBUTORS</code></a> 文件中，
也许还会出现在 <a href="/AUTHORS"><code>AUTHORS</code></a> 文件中。
</p>

<div class="english">
<p>The <a href="/CONTRIBUTORS"><code>CONTRIBUTORS</code></a> file
defines who the Go contributors&mdash;the people&mdash;are;
the <a href="/AUTHORS"><code>AUTHORS</code></a> file, which defines
who &ldquo;The Go Authors&rdquo;&mdash;the copyright holders&mdash;are.
The Go developers at Google will update these files when submitting
your first change.
In order for them to do that, you need to have completed one of the
contributor license agreements:
</p>
</div>

<p>
<a href="/CONTRIBUTORS"><code>CONTRIBUTORS</code></a> 文件详述了哪些人是Go的贡献者；
<a href="/AUTHORS"><code>AUTHORS</code></a> 文件详述了谁是&ldquo;Go的作者&rdquo;，
即版权的持有者。Google的Go开发者将在你第一次提交更改时更新这些文件。
为此，你必须完成贡献者许可协议之一：
</p>

<div class="english">
<ul>
<li>
If you are the copyright holder, you will need to agree to
the <a href="http://code.google.com/legal/individual-cla-v1.0.html">individual
contributor license agreement</a>, which can be completed online.
</li>
<li>
If your organization is the copyright holder, the organization
will need to agree to the <a href="http://code.google.com/legal/corporate-cla-v1.0.html">corporate contributor license agreement</a>.
(If the copyright holder for your code has already completed the
agreement in connection with another Google open source project,
it does not need to be completed again.)
</li>
</ul>
</div>

<ul>
<li>
若你是版权持有者，你必须接受
<a href="http://code.google.com/legal/individual-cla-v1.0.html">个人贡献者许可协议</a>，
这可以在线完成。
</li>
<li>
若你的组织为版权持有者，该组织必须接受
<a href="http://code.google.com/legal/corporate-cla-v1.0.html">团体贡献者许可协议</a>。
（若你的代码的版权持有者已在另一个相关的Google开源项目中完成了协议，则无需再次完成。）
</li>
</ul>

<div class="english">
<p>
This rigmarole needs to be done only for your first submission.
</p>
</div>

<p>
这些废话只会在你第一次提交意见时完成。
</p>

<div class="english">
<p>Code that you contribute should use the standard copyright header:</p>

<pre>
// Copyright 2012 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
</pre>
</div>

<p>你贡献的代码应使用标准版权页眉：</p>

<pre>
// Copyright 2012 The Go Authors. All rights reserved.
// Use of this source code is governed by a BSD-style
// license that can be found in the LICENSE file.
</pre>
